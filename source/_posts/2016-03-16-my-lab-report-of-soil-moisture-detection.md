---
author: ety001
layout: post
title: 我的土壤湿度检测实验总结
tags:
- DM实验室
- 杂七杂八
---

去年下半年花了很久的时间从零开始，然后搞了个土壤湿度检测的东西，成品就是下图的样子：

![成品](/upload/20160316/1.jpg)

本计划是想直接把土壤湿度检测装置安装到树莓派上，然后用python之类的脚本语言去采集数据，
并发布到网络收集器上，同时提供低于阈值微信提醒。但是后来才知道，原来树莓派只接收数字信号，
不接受模拟信号，买到的土壤检测装置，如果想要提供具体的值的话，需要采集模拟信号。
对于一个非电子专业的人来说，终于借这个机会大体知道了什么是数电，什么是模电了。

既然没法直接搞，就看看中间加个转换，试了试之前那个不能用的`arduino`，好吧依旧不能用。
就花钱买了个[`ADC`](http://s.click.taobao.com/t?e=m%3D2%26s%3DqA85UWS%2BXH0cQipKwQzePOeEDrYVVa64K7Vc7tFgwiFRAdhuF14FMVDjrG2n328J1aH1Hk3GeOgVbLnG1O55J2SP5rc5nVXRcJs%2BUi7DM%2BcVMhb0U1nahcPwu%2B7SsJVXr5teog9dlPBYDLVnbiU7U8YOae24fhW0&pvid=50_222.134.110.205_351_1458109566534)，结果搞了两个月也没有搞明白该怎么接线，就更不用说怎么写个支持树莓派的驱动了。。

于是重新回过头来研究`arduino`吧，看看到底能不能修好。最终发现原来是某些烧写配置不对，
重新配置后，烧写测试通过。关于烧写`A8M`的配置就放在了gist，<https://gist.github.com/ety001/d44bd7c770b2d2937cfb>。

最终就是树莓派通过`arduino`来读取采集器的数据，并走`wifi`把数据上报，达到阈值就发微信提醒。
下面的链接就是采集的湿度数据了：

<http://www.yeelink.net/devices/343089/#sensor_380664>

今天开始就关停这套设备了，因为插入土壤的探测部分，真心的不耐腐蚀。
所以现在经过实验后来看，当下淘宝上卖的[类似这样的土壤湿度检测元件](http://s.click.taobao.com/t?e=m%3D2%26s%3DNrvJUDEwXF4cQipKwQzePOeEDrYVVa64K7Vc7tFgwiFRAdhuF14FMV3Ck%2BJX8eppMMgx22UI05YVbLnG1O55J2SP5rc5nVXRcJs%2BUi7DM%2Bc4FWg0oS8KwV3vdPHYA5wck8nwxyyLVFUYpKhITPjCd8YOae24fhW0&pvid=50_222.134.110.205_218_1458100341042)，
也就是进行下实验而已，想要长时间使用则是不行的。

长时间使用的话，就像下图的样子了：

![长时间使用的土壤检测装置被腐蚀](/upload/20160316/2.jpg)

可以看到PCB板上的金属多部分都已经被腐蚀了，这也是导致有段时间的数据一直为零的原因。
由于我设置了当湿度低于40%就进行微信提醒，每天至多提醒一次，所以那段时间天天都有微信报警。。。
当时还纳闷，是什么原因导致的，后来一个周末，把上图的那个装置从土里拔出来，才知道原来是这样。

于是又更换了新的探测装置——不锈钢小条，结果稳定使用3个月后，又被腐蚀了，

![不锈钢都被腐蚀了](/upload/20160316/3.jpg)

可以看到有一根被腐蚀断了。我观察到断的位置是这根不锈钢条插在土里面时，土壤与空气交界的地方以上的部位。
这就引发了新的思考，为啥一根完好无损，另一根就被腐蚀的很严重呢。刚开始以为可能是土壤的问题，
但是后来看了最早的那个原装的探测装置的腐蚀情况，发现腐蚀也是不对称的。

一阳一阴，一正一负，突然间就想到了原来化学课上学过的电解。如果用电解的思路来考虑的话，
就能解释为什么只有一根腐蚀严重了，土壤应该只是提供了潮湿的环境和土壤中的离子，也就是土壤充当了电解质。
由于`arduino`的电流很微弱，所以化学反应进行的很缓慢。另外腐蚀严重的一端应该就是正极，
这个在拆下来的时候也没有仔细看看。。

总之，就当做是做了个实验吧。

